
<div class="top_stories">
	<h1>Top Stories</h1>
</div>

<center>
	<%= will_paginate @top_stories%>
</center>

<%Question.all.each do |question|%>
	<div class="panel panel-default">
		
		<div class="panel-heading"><a id="post_title" href="/questions/<%=question.id%>"><%=question.title%></a><br>

		by <a href="/users/<%=question.user_id%>"><%=question.user.name%></a><br>

			<%if question.user_id.to_i == session[:user_id]%>

				<a href="/questions/<%=question.id%>/edit"><button style="float:right">Edit Your Question</button></a>

				<form action="/questions/<%=question.id%>" method="post">
					<input type="hidden" name="_method" value="delete">
					<input type="submit" value="Delete Your Questions" style="float:right">
				</form>
			<%end%>

		</div> <!-- panel-heading -->


		<%if Answer.find_by(question_id: question.id)%>
		
			<div class="panel-body truncated_answer_content"><%=Answer.find_by(question_id: question.id).content%><br>
			</div> <!--- panel-body -->
			
		<%end%>

		<%if logged_in?%>
		
		<div class="panel-footer">
			<a href="/questions/<%=question.id%>"><button>Post Your Answer!</button></a>	

			<div id="vote_control">

				<button type="button" class="upvote-button" id="upvote-button-<%=question.id %>"  data-vote-url="/questions/<%= question.id %>/upvote">Upvote <%=question.questionvotes.where(pattern: true).count%></button>

				<button type="button" class="downvote-button" id="downvote-button-<%=question.id %>"  data-vote-url="/questions/<%= question.id %>/downvote">Downvote </button>
			</div>
		</div> <!--- panel-footer -->

		<%else%>
			<div class="panel-footer">
				<div class="container2">
			  <!-- Trigger the modal with a button -->
			  	<button type="button" class="btn btn-default upvote-button" id="myBtn" data-toggle = "modal" data-target = "#myModal">Upvote <%=question.questionvotes.where(pattern: true).count%></button>

					<button type="button" class="btn btn-default upvote-button" id="myBtn" data-toggle = "modal" data-target = "#myModal">Downvote</button>

				</div> <!--container2 -->
			</div> <!--panel footer -->
		<%end%>
	</div> <br><!-- whole-panel -->
<%end%>



<!-- Modal -->
<div class="modal fade" id="myModal_signup" role="dialog">
  <div class="modal-dialog">
  
    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header" style="padding:35px 50px;">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4><span class="glyphicon glyphicon-lock"></span> Sign Up</h4>
      </div> <!--modal-header -->

      <div class="modal-body" style="padding:40px 50px;">

        <form role="form" action="/users" method="post">

	        <div class="form-group">
            <label for="name"><span class="glyphicon glyphicon-user"></span> Name</label>
            <input type="text" class="form-control" id="name" placeholder="Enter name" name="name">
          </div>

          <div class="form-group">
            <label for="usrname"><span class="glyphicon glyphicon-user"></span> Email</label>
            <input type="text" class="form-control" id="usrname" placeholder="Enter email" name="email">
          </div>

          <div class="form-group">
            <label for="psw"><span class="glyphicon glyphicon-eye-open"></span> Password</label>
            <input type="password" class="form-control" id="psw" placeholder="Enter password" name="password">
          </div>

          <div class="form-group">
            <label for="password_confirmation"><span class="glyphicon glyphicon-eye-open"></span> Password</label>
            <input type="password" class="form-control" id="password_confirmation" placeholder="Reenter password" name="password_confirmation">
          </div>

          <div class="checkbox">
            <label><input type="checkbox" value="" checked>Remember me</label>
          </div>
            <button type="submit" class="btn btn-success btn-block"><span class="glyphicon glyphicon-off"></span> Register</button>

        </form>
      </div> <!--modal-body -->

      <div class="modal-footer">
        <button type="submit" class="btn btn-danger btn-default pull-left" data-dismiss="modal"><span class="glyphicon glyphicon-remove"></span> Cancel</button>
        <p>Not a member? <a href="#">Sign Up</a></p>
        <p>Forgot <a href="#">Password?</a></p>
      </div> <!--modal-footer -->
    
    </div> <!--modal-content-->
    
  </div><!--modal dialog-->
</div>  <!-- modal fade -->

<!-- Modal Log In -->
<div class="modal fade" id="myModal" role="dialog">
  <div class="modal-dialog">
  
    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header" style="padding:35px 50px;">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4><span class="glyphicon glyphicon-lock"></span> Login</h4>
      </div> <!--modal-header -->

      <div class="modal-body" style="padding:40px 50px;">
        <form role="form" action="/users/login" method="post">
          <div class="form-group">
            <label for="usrname"><span class="glyphicon glyphicon-user"></span> Username</label>
            <input type="text" class="form-control" id="usrname" placeholder="Enter email" name="email">
          </div>

          <div class="form-group">
            <label for="psw"><span class="glyphicon glyphicon-eye-open"></span> Password</label>
            <input type="password" class="form-control" id="psw" placeholder="Enter password" name="password">
          </div>

          <div class="checkbox">
            <label><input type="checkbox" value="" checked>Remember me</label>
          </div>
            <button type="submit" class="btn btn-success btn-block"><span class="glyphicon glyphicon-off"></span> Login</button>

        </form>
      </div> <!--modal-body -->

      <div class="modal-footer">
        <button type="submit" class="btn btn-danger btn-default pull-left" data-dismiss="modal"><span class="glyphicon glyphicon-remove"></span> Cancel</button>
        <p>Not a member? <a href="#">Sign Up</a></p>
        <p>Forgot <a href="#">Password?</a></p>
      </div> <!--modal-footer -->
    
    </div> <!--modal-content-->
    
  </div><!--modal dialog-->
</div>  <!-- modal fade -->


<!-- Modal Write Question -->
<div class="modal fade" id="myModal_write_question" role="dialog">
  <div class="modal-dialog">
  
    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header" style="padding:35px 50px;">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4><span class="glyphicon glyphicon-list-alt"></span> Write Question </h4>
      </div> <!--modal-header -->

      <div class="modal-body" style="padding:40px 50px;">
        <form role="form" action="/questions" method="post">
          <div class="form-group">
            <label for="title"> Your Question: </label>
            <input type="text" class="form-control" id="title" placeholder="Enter Your Question" name="title" required>
          </div>

            <button type="submit" class="btn btn-success btn-block"><span class="glyphicon glyphicon-ok"></span> Submit Your Question</button>

        </form>
      </div> <!--modal-body -->

      <div class="modal-footer">
        <button type="submit" class="btn btn-danger btn-default pull-left" data-dismiss="modal"><span class="glyphicon glyphicon-remove"></span> Cancel</button>
        <p>Not a member? <a href="#" data-dismiss="modal" data-toggle = "modal" data-target = "#myModal_signup">Sign Up</a></p>
        <p>Forgot <a href="#">Password?</a></p>

      </div> <!--modal-footer -->
    
    </div> <!--modal-content-->
    
  </div><!--modal dialog-->
</div>  <!-- modal fade -->
